### Tests

The [snapshots](src/snapshots) directory is generated by [insta](docs.rs/insta). Each `*.snap` is a YAML file
maintaining the "correct" serialised `Bgm` for each binary BGM file (in [bin](bin)).

**Note**: snapshots of decoded BGM files from the game are not committed to git - you'll have to generate
original snapshots on a stable commit and compare against that. Perhaps in the future test cases can be made out of
non-vanilla files.

#### Setup

```
$ python3 bin/extract.py path/to/papermario.z64
$ cargo add cargo-insta
$ cargo insta test --accept-unseen
```

#### Running tests

Test everything:

```
$ cargo insta test
```

If your serialised `Bgm`s differed from the canonical snapshots, you can review the changes with the following command.

```
$ cargo insta review
```
